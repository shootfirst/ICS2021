# 计算机系统

## 信息的表示与处理

## 程序的机器级表示

## 流水线

## 优化


## 存储体系结构

#### cache

cache line是cache和主存之间数据传输的最小单位。cache line大小决定`offset`位数。通过offset在cache line中读取指定数据

cache由cache line组成，通过`index`去定位cache line。

通过`tag`(中保存的是整个地址位宽去除index和offset使用的bit剩余部分)判断是否命中，对于直接映射，只需要比较一次，对于n路组相联，要去n个组里面一一比较

##### 组织结构

+ 一路组相联：一个地址对应一个cache line

+ n 路组相联：一个地址对应n个组里面的cache line

+ 全相联：没有index了，只有tag

##### 更新策略

+ 写回

+ 写直达

##### 不命中类型

+ 强制性不命中

+ 冲突不命中

+ 容量不命中


## 链接

### 静态链接

#### 符号解析

##### 符号

指被分配了存储空间。如果是函数名即指其代码所在区；变量名即指其所占的静态数据区
  
+ 所有定义符号的值就是其目标所在的首地址

+ 局部变量和参数等等经编译器处理后不再是符号了！！！

类型：

+ 全局符号

+ 外部符号

+ 本地符号

##### 符号表 .symtab节

作用：符号定义存储在目标文件中(由汇编器) 的符号表中.

存储内容：存储符号名称和符号位置

##### 流程

确定符号引用关系，填充入rel节


#### 重定位

##### 重定位表 rel.节

作用：需要重定位的text和data会有指定的rel.text和rel.data节，存储需要重定位的符号信息

存储内容：存储当前节引用符号的偏移量和对应符号所在的符号表与符号表中偏移

##### 流程

合并相似节为段，确定各个符号的虚拟地址；对定义符号重定位；对引用符号重定位



### 动态链接

在程序被exev加载入内存甚至运行(dlopen)的时候，再将其链接

问题：动态链接共享的是代码，指令部分有两个地方是需要在装载时确定。一是指令中访问其他模块的数据。 二是指令中调用其他模块的函数。所以如何共享？

解决：在数据段中建立GOT段，里面存放跨模块的数据的地址，在装载时动态填入。共享对象指令中对跨模块数据的访问，可以通过GOT中的指针间接访问。

这样的好处是，指令中的地址就从跨模块数据的地址，变成了got中指针的地址，而这个地址是相对代码段确定的。

##### 动态重定位表 rela.dyn节

存储





## 异常控制流

## 虚拟内存

## 动态内存分配


